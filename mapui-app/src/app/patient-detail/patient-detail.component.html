<div *ngIf="patient">
  <mat-card class="patient-detail">
    <mat-card-header class="patient-detail-header">
      <mat-card-title>
        <h1>{{(patient.firstName + " " + patient.lastName) | uppercase}}</h1>
      </mat-card-title>
      <mat-card-subtitle>
        <mat-chip-list aria-label="Fish selection">
          <mat-chip>{{patient.age + ' ans'}}</mat-chip>
          <mat-chip>{{patient.sex === 1 ? "Male" : "Female"}}</mat-chip>
        </mat-chip-list>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <mat-accordion class="patient-detail-headers-align" multi>
        <mat-expansion-panel disabled="{{patient.drugs.length === 0}}">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Drugs
            </mat-panel-title>
            <mat-panel-description>
              {{patient.drugs.length === 0 ? 'There is no drug for this patient' : 'See the list of drugs of this patient'}}
              <mat-icon>account_circle</mat-icon>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p *ngFor="let drug of patient.drugs">
            {{drug.name}}
          </p>
        </mat-expansion-panel>
        <mat-expansion-panel disabled="{{patient.treatments.length === 0}}">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Treatments
            </mat-panel-title>
            <mat-panel-description>
              {{patient.treatments.length === 0 ? 'There is no treatment for this patient' : 'See the list of treatments of this patient'}}
              <mat-icon>map</mat-icon>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p *ngFor="let treatment of patient.treatments">
            du {{treatment.start}} au {{treatment.end }}
            <br/>
            {{treatment.text}}
          </p>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-content>
    <mat-card-actions>
      <app-patient-form [currentPatient]="patient" (updatePatient)="updatePatient($event)" [create]="false"></app-patient-form>
      <button class="patient-detail-btn-back" mat-raised-button color="accent" (click)="goBack()">go back</button>
    </mat-card-actions>
  </mat-card>
</div>
